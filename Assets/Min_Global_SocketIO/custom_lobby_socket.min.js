let socket=io(),customLobby_messageCount=(socket.on("connect",()=>{var e;addUserList(localStorage.getItem("username")),notifyAllUsers(),localStorage.getItem("lobby-room")&&(e=CryptoJS.AES.decrypt(localStorage.getItem("lobby-room"),"lobby-room").toString(CryptoJS.enc.Utf8))&&socket.emit("room-status",e,"join");try{CryptoJS.AES.decrypt(localStorage.getItem("username"),"username").toString(CryptoJS.enc.Utf8)&&imInLobby(!0,global_username)}catch(e){console.log(e)}}),socket.on("custom-check-user-active-friend",(e,t)=>{var o,n=document.getElementById("availableList-custom-container");n&&0==n.contains(document.getElementById("custom-invite-div"+e))&&null==localStorage.getItem("invited-user-custom")&&((o=document.createElement("div")).setAttribute("class","flex flex-row space-x-2 items-center"),o.setAttribute("id","custom-invite-div-"+e),n.appendChild(o),(n=document.createElement("img")).setAttribute("class","w-[2rem] h-[2rem] rounded-full border-2 border-blue-500"),n.setAttribute("alt","user profile"),n.setAttribute("src",t),o.appendChild(n),(n=document.createElement("p")).setAttribute("class","font-Pixelify text-sm text-black text-center"),n.appendChild(document.createTextNode(e)),o.appendChild(n),(n=document.createElement("button")).setAttribute("class","font-Pixelify text-sm text-center text-white bg-blue-500 p-2 rounded-2xl cursor-pointer hover:bg-blue-700"),n.setAttribute("onclick",'invitePlayer("'+e+'", "'+t+'", "'+localStorage.getItem("lobby-room")+'")'),n.appendChild(document.createTextNode("Invite")),o.appendChild(n))}),socket.on("custom-div-status-player-remove",e=>{var t=document.getElementById("availableList-custom-container");t&&t.contains(document.getElementById("custom-invite-div"+e))&&document.getElementById("custom-invite-div"+e).remove()}),socket.on("refresh-custom-div-invite",()=>{inviteFriendChecker()}),socket.on("invite-declined",(e,t)=>{document.getElementById("custom-invite-div-"+e)&&document.getElementById("custom-invite-div-"+e).remove();var o,n=document.getElementById("availableList-custom-container");n&&0==n.contains(document.getElementById("custom-invite-div"+e))&&((o=document.createElement("div")).setAttribute("class","flex flex-row space-x-2 items-center"),o.setAttribute("id","custom-invite-div-"+e),n.appendChild(o),(n=document.createElement("img")).setAttribute("class","w-[2rem] h-[2rem] rounded-full border-2 border-blue-500"),n.setAttribute("alt","user profile"),n.setAttribute("src",t),o.appendChild(n),(n=document.createElement("p")).setAttribute("class","font-Pixelify text-sm text-black text-center"),n.appendChild(document.createTextNode(e)),o.appendChild(n),(n=document.createElement("button")).setAttribute("class","font-Pixelify text-sm text-center text-white bg-blue-500 p-2 rounded-2xl cursor-pointer hover:bg-blue-700"),n.setAttribute("onclick",'invitePlayer("'+e+'", "'+t+'")'),n.appendChild(document.createTextNode("Invite")),o.appendChild(n))}),socket.on("invite-accepted",(e,t,o)=>{document.getElementById("inviteContainer").style.display="flex";var n,l=document.getElementById("inviteContainer");l&&((n=document.createElement("img")).setAttribute("alt","User Profile"),n.setAttribute("src",t),n.setAttribute("class","w-[8rem] h-[8rem] border-2 rounded-full border-blue-500 xsm:w-[5rem] xsm:h-[5rem]"),l.appendChild(n),(t=document.createElement("p")).setAttribute("class","font-Pixelify text-center text-blue-700 text-sm"),t.appendChild(document.createTextNode(e)),l.appendChild(t),(n=document.createElement("p")).setAttribute("class","font-Pixelify text-center text-blue-700 text-sm"),n.appendChild(document.createTextNode("Trophies: "+o)),l.appendChild(n),(t=document.createElement("div")).setAttribute("class","flex flex-row space-x-2"),l.appendChild(t),(o=document.createElement("div")).setAttribute("class","font-Pixelify text-sm text-center text-white bg-blue-500 p-2 rounded-2xl"),o.setAttribute("id","custom-button-ready-"+e),o.appendChild(document.createTextNode("Ready")),t.appendChild(o),(n=document.createElement("button")).setAttribute("class","font-Pixelify text-sm text-center text-white bg-red-500 p-2 rounded-2xl hover:bg-red-700"),n.setAttribute("onclick",'kickPlayer("'+e+'")'),n.appendChild(document.createTextNode("Kick")),t.appendChild(n),localStorage.setItem("invited-player",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e),"invited-player").toString()))}),socket.on("kicked-invited",()=>{dashboard()}),socket.on("user-leave-custom-lobby",async e=>{switch(e){case"host":document.getElementById("custom-start-button").style.backgroundColor="#60a5fa",document.getElementById("custom-start-button").style.pointerEvents="none";var t=localStorage.getItem("username");document.getElementById("loadingSpinner").style.display="flex",document.getElementById("validateText").innerText="Navigating, please wait...",CryptoJS.AES.decrypt((n="_",t.replace(new RegExp(n,"g"),"/")),"username").toString(CryptoJS.enc.Utf8)?(document.getElementById("loadingSpinner").style.display="none",imInLobby(!0,global_username),localStorage.removeItem("host"),window.location.href="/customLobby/Host/"+(n="_",t.replace(/\//g,n))):window.location.href="/InvalidUser";break;case"invited":document.getElementById("inviteContainer").style.display="none";for(var o=document.getElementById("inviteContainer");o.lastElementChild;)o.removeChild(o.lastElementChild);localStorage.removeItem("invited-player")}var n}),socket.on("custom-player-ready",(e,t)=>{switch(t){case"Ready":document.getElementById("custom-button-ready-"+e).style.backgroundColor="green",document.getElementById("custom-button-ready-"+e).style.fontWeight="bold",document.getElementById("custom-start-button").style.pointerEvents="auto",document.getElementById("custom-start-button").style.backgroundColor="#3b82f6",document.getElementById("custom-start-button").style.cursor="pointer";break;case"Not-ready":document.getElementById("custom-button-ready-"+e).style.backgroundColor="#3b82f6",document.getElementById("custom-button-ready-"+e).style.fontWeight="normal",document.getElementById("custom-start-button").style.backgroundColor="#60a5fa",document.getElementById("custom-start-button").style.cursor="not-allowed",document.getElementById("custom-start-button").style.pointerEvents="none"}}),socket.on("custom-lobby-room-checker",e=>{imInLobby(!1,global_username),socket.emit("room-status",e,"leave"),localStorage.removeItem("host"),localStorage.removeItem("invited-player"),localStorage.removeItem("lobby-room"),document.getElementById("loadingSpinner").style.display="none",window.location.href="/"}),0);socket.on("custom-lobby-room-message",(e,t,o)=>{customLobby_messageCount++,document.getElementById("notifMsg_custom")&&(document.getElementById("notifMsg_custom").style.display="inline",document.getElementById("notifMsg_custom").innerText=customLobby_messageCount);var n,l,r,d=document.getElementById("customMessageParent");d&&((l=document.createElement("div")).setAttribute("class","flex justify-end w-full h-auto"),d.appendChild(l),(n=document.createElement("div")).setAttribute("class","flex flex-col space-y-2 w-fit h-fit"),l.appendChild(n),(l=document.createElement("div")).setAttribute("class","flex flex-row space-x-2 items-center justify-end"),n.appendChild(l),(r=document.createElement("p")).setAttribute("class","font-Pixelify text-black font-bold text-sm"),r.appendChild(document.createTextNode(t)),l.appendChild(r),(t=document.createElement("img")).setAttribute("alt","user profile"),t.setAttribute("class","w-[2rem] h-[2rem] border-2 border-blue-500 rounded-full"),t.setAttribute("src",o),l.appendChild(t),(r=document.createElement("div")).setAttribute("class","w-[10rem] h-auto text-left bg-blue-700 rounded-2xl p-2 md:w-[15rem]"),n.appendChild(r),(o=document.createElement("p")).setAttribute("class","font-Pixelify text-white text-sm"),o.appendChild(document.createTextNode(e)),r.appendChild(o),d.scrollTo(0,d.scrollHeight))}),socket.on("custom-lobby-room",e=>{socket.emit("room-status",e,"join");localStorage.setItem("lobby-room",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e),"lobby-room").toString())}),socket.on("game-custom-start",async()=>{var e,t=localStorage.getItem("username");document.getElementById("loadingSpinner").style.display="flex",document.getElementById("validateText").innerText="Starting game, please wait...",CryptoJS.AES.decrypt((e="_",t.replace(new RegExp(e,"g"),"/")),"username").toString(CryptoJS.enc.Utf8)?(document.getElementById("loadingSpinner").style.display="none",window.location.replace("/Checker/Custom-mode/"+(e="_",t.replace(/\//g,e)))):window.location.href="/InvalidUser"});