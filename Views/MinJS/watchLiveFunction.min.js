async function displayLobby(){var a=document.getElementById("lobbyContainer");if(a){let e=a.lastElementChild;for(;e;)a.removeChild(e),e=a.lastElementChild}try{var e,t,o=await(await fetch("/lobby",{method:"POST",headers:{"Content-Type":"Application/json",Accept:"Application/json"},body:JSON.stringify({guaranteedAccess:!0})})).json();"success"===o.message?(e=o.lobby,document.getElementById("lobbyCount").innerText="Total Lobbies: "+o.lobbyCount,e.forEach(e=>{var t=document.createElement("div"),o=(t.setAttribute("class","grid grid-cols-2 grid-rows-1 w-full rounded-2xl text-black cursor-pointer hover:bg-blue-500 hover:text-white xsm:rounded-lg"),t.setAttribute("onclick",'modalStatus("modalOpenLobbyPanel", "modalOpenLobbyContainer", "flex", "modal_animation"); openLobbyPanel("'+e.lobbyRoom+'", "'+e.host+'", "'+e.invited+'", "'+e.lobbyRoom+'")'),document.createElement("p")),n=(o.setAttribute("class","font-Pixelify font-bold text-center text-sm"),o.appendChild(document.createTextNode(e.lobbyType)),document.createElement("p")),l=(n.setAttribute("class","font-Pixelify font-bold text-center text-sm"),n.appendChild(document.createTextNode(e.lobbyRoom)),document.createElement("p")),l=(l.setAttribute("class","font-Pixelify font-bold text-center text-sm"),l.appendChild(document.createTextNode(e.host)),document.createElement("p"));l.setAttribute("class","font-Pixelify font-bold text-center text-sm"),l.appendChild(document.createTextNode(e.invited)),t.appendChild(o),t.appendChild(n),a.appendChild(t)})):((t=document.createElement("p")).setAttribute("class","font-Pixelify font-bold text-center text-sm"),t.appendChild(document.createTextNode(o.message)),a.appendChild(t))}catch(e){console.log(e)}}async function openLobbyPanel(e,t,o,n){var l=document.getElementById("buttonWrapperLobby"),a=document.createElement("button"),e=(a.setAttribute("class","w-auto h-auto font-Pixelify text-center text-sm rounded-2xl bg-blue-500 p-2 text-white hover:bg-blue-700"),a.setAttribute("onclick",'watchLive("'+e+'", "'+t+'", "'+o+'")'),a.appendChild(document.createTextNode("Enter Room")),document.createElement("button"));e.setAttribute("class","w-auto h-auto font-Pixelify text-center text-sm rounded-2xl bg-blue-500 p-2 text-white hover:bg-blue-700"),e.setAttribute("onclick",'modalStatus("modalOpenLobbyPanel", "modalOpenLobbyContainer", "none", null); clearLobbyPanel()'),e.appendChild(document.createTextNode("Close Panel")),l.appendChild(a),l.appendChild(e),document.getElementById("lobbyOpenName").innerText=n;a=await(await fetch("/checker/getPlayerData",{method:"POST",headers:{"Content-Type":"Application/json",Accept:"Application/json"},body:JSON.stringify({playerHost:t,playerInvited:o})})).json();"success"===a.message&&(document.getElementById("hostUsername").innerText=a.hostName,document.getElementById("hostProfileData").src=a.hostProfile,document.getElementById("hostTrophyData").innerText="Trophy: "+a.hostTrophy,document.getElementById("invitedUsername").innerText=a.invitedName,document.getElementById("invitedProfileData").src=a.invitedProfile,document.getElementById("invitedTrophyData").innerText="Trophy: "+a.invitedTrophy)}function clearLobbyPanel(){for(var e=document.getElementById("buttonWrapperLobby");e.lastElementChild;)e.removeChild(e.lastElementChild)}function watchLive(e,t,o){localStorage.setItem("lobby-room",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e),"lobby-room").toString()),localStorage.setItem("player_host",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(t),"player_host").toString()),localStorage.setItem("player_invited",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(o),"player_invited").toString()),document.getElementById("loadingSpinner").style.display="flex",document.getElementById("validateText").innerText="Starting game, please wait...";e=CryptoJS.AES.decrypt(localStorage.getItem("username"),"username").toString(CryptoJS.enc.Utf8);e?(document.getElementById("loadingSpinner").style.display="none",localStorage.setItem("spectator",CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e),"spectator")),window.location.href="/Checker/Match-mode/"+(t=localStorage.getItem("username"),o="_",t.replace(/\//g,o))):window.location.href="/InvalidUser"}